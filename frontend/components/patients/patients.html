<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BK Hospital - Patients</title>
    <link rel="stylesheet" href="../homePage/homePage.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" href="table.css" />
  </head>
  <body>
    <header class="header">
      <div class="header-left" onclick="navigate('Home')" style="cursor: pointer;">
        <img src="../../image/01_logobachkhoasang.png" alt="BK Hospital Logo" class="logo" />
        <h1>BK Hospital</h1>
      </div>
      <div class="header-right">
        <img
          src="../../image/211694_bell_icon.png"
          alt="Notifications"
          class="notification-bell"
          title="Notifications"
          onclick="toggleNotifications()"
        />
        <div class="user-info">
          <img
            src="../../image/avatar.jpg"
            alt="User Avatar"
            class="avatar"
            title="User Account"
          />
          <div class="user-details">
            <span class="user-name">John Doe</span>
            <span class="user-role">Admin</span>
          </div>
        </div>
      </div>
    </header>

    <div class="notification-popup" id="notification-popup">
      <h3>Notifications</h3>
      <ul id="notification-list">
        <!-- Notifications will be populated here -->
      </ul>
    </div>

    <div class="container">
      <div class="sidebar">
        <h2>Navigation</h2>
        <ul>
          <li><button onclick="navigate('Doctors')"><i class="fas fa-user-md"></i> Doctors</button></li>
          <li><button onclick="navigate('Nurses')"><i class="fas fa-user-nurse"></i> Nurses</button></li>
          <li class="active"><button onclick="navigate('Patients')"><i class="fas fa-procedures"></i> Patients</button></li>
          <li><button onclick="navigate('Treatments')"><i class="fas fa-stethoscope"></i> Treatments</button></li>
          <li><button onclick="navigate('Medications')"><i class="fas fa-pills"></i> Medications</button></li>
          <li><button onclick="navigate('departments')"><i class="fas fa-building"></i> Departments</button></li>
        </ul>
        <div class="logout-container">
          <a href="../login/login.html" class="logout-button"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>
      </div>

      <div class="main-content">
        <h1>Patients</h1>
        <div class="actions">
          <input type="text" placeholder="Search..." class="search-bar" />
          <button class="filter-button">
            <span>Filter by Doctor</span>
            <i class="fas fa-filter"></i>
          </button>
          <button id="new-patient-button" class="new-patient-button fancy-button">
            <i class="fas fa-plus"></i> New Patient
          </button>
          <button id="delete-patient-button" class="delete-patient-button fancy-button">
            <i class="fas fa-trash"></i> Delete Patient
          </button>
        </div>
        <div class="patient-table">
          <table class="fancy-table full-width-table no-wrap-table">
            <thead>
              <tr>
                <th>Full Name</th>
                <th>Code</th>
                <th>Gender</th>
                <th>Discharge Date</th>
                <th>Doctor</th>
                <th class="scrollbarhead"></th>
              </tr>
            </thead>
            <tbody id="patient-rows">
              <!-- Patient rows will be populated here -->
            </tbody>
          </table>
        </div>
        <div class="pagination">
          <button class="page-button">Previous</button>
          <span class="page-info">Page 1 of 10</span>
          <button class="page-button">Next</button>
        </div>
      </div>
    </div>

    <!-- Modal for adding new patient -->
    <div id="new-patient-modal" class="modal">
      <div class="modal-content">
        <span id="close-new-patient-modal" class="close">&times;</span>
        <h2>New Patient</h2>
        <form id="new-patient-form">
          <label for="pCode">Patient Code:</label>
          <input type="text" id="pCode" name="pCode" required>
          <label for="pFirstName">First Name:</label>
          <input type="text" id="pFirstName" name="pFirstName" required>
          <label for="pLastName">Last Name:</label>
          <input type="text" id="pLastName" name="pLastName" required>
          <label for="pAddress">Address:</label>
          <input type="text" id="pAddress" name="pAddress" required>
          <label for="pGender">Gender:</label>
          <input type="text" id="pGender" name="pGender" required>
          <label for="dischargeDate">Discharge Date:</label>
          <input type="date" id="dischargeDate" name="dischargeDate" required>
          <label for="pPhoneNumber">Phone Number:</label>
          <input type="text" id="pPhoneNumber" name="pPhoneNumber" required>
          <label for="pDob">Date of Birth:</label>
          <input type="date" id="pDob" name="pDob" required>
          <label for="doctor_code">Doctor Code:</label>
          <input type="text" id="doctor_code" name="doctor_code" required>
          <button type="submit">Add Patient</button>
        </form>
      </div>
    </div>

    <!-- Modal for deleting a patient -->
    <div id="delete-patient-modal" class="modal">
      <div class="modal-content">
        <span id="close-delete-patient-modal" class="close">&times;</span>
        <h2>Delete Patient</h2>
        <form id="delete-patient-form">
          <label for="delete-pCode">Patient Code:</label>
          <input type="text" id="delete-pCode" name="pCode" required>
          <button type="submit">Delete Patient</button>
        </form>
      </div>
    </div>

    <script src="../patients/patients.js"></script>
    <script src="../patients/delete_patient.js"></script>
    <script>

      async function editPatient(code) {
        // Implement edit functionality
        alert(`Edit patient with code: ${code}`);
      }

      function deletePatient(code) {
        // Implement delete functionality
        alert(`Delete patient with code: ${code}`);
      }

      function navigate(page) {
        if (page === 'Home') {
          window.location.href = '../homePage/homePage.html';
        }
        if (page === 'Doctors') {
          window.location.href = '../doctors/doctors.html';
        } else if (page === 'Nurses') {
          window.location.href = '../nurses/nurses.html';
        } else if (page === 'Treatments') {
          window.location.href = '../treatments/treatments.html';
        } else if (page === 'Medications') {
          window.location.href = '../medications/medications.html';
        } else if (page === 'Patients') {
          window.location.href = '../patients/patients.html';
        } else if (page === 'departments') {
          window.location.href = '../departments/departments.html';
        }
      }

      function toggleNotifications() {
        const popup = document.getElementById('notification-popup');
        popup.classList.toggle('show');
      }

      document.addEventListener('DOMContentLoaded', () => {
        displayNotifications();
      });

      function displayNotifications() {
        const notificationList = document.getElementById('notification-list');
        const notifications = [
          'New patient admitted',
          'Doctor appointment scheduled',
          'Medication restocked',
          // Add more notifications as needed
        ];

        notifications.forEach(notification => {
          const li = document.createElement('li');
          li.textContent = notification;
          notificationList.appendChild(li);
        });
      }

      function handleNewPatientClick() {
        const popup = document.getElementById('new-patient-popup');
        if (popup) {
          popup.classList.add('show');
        } else {
          console.error('Popup element not found');
        }
      }
    </script>
  </body>
</html>
